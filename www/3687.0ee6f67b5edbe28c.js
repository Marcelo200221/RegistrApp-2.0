"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3687],{3687:(_,u,s)=>{s.r(u),s.d(u,{LoginPageModule:()=>C});var h=s(6814),l=s(95),o=s(3582),g=s(3044),p=s(5861),e=s(6689),c=s(6406),v=s(189);let m=(()=>{class a{constructor(t,i,n,r){this.navCtrl=t,this.animationCtrl=i,this.alertController=n,this.storage=r,this.nombre="",this.nombreValido=!1,this.clave="",this.claveValida=!1}ngOnInit(){let t=localStorage.getItem("Nuevo usuario");if(t)try{this.registroRecupParseado=JSON.parse(t),Array.isArray(this.registroRecupParseado)?console.log("Es un arreglo:",this.registroRecupParseado):console.log("No es un arreglo JSON v\xe1lido:",this.registroRecupParseado)}catch(i){console.error("Error al analizar el valor del LocalStorage:",i)}}ionViewDidEnter(){window.addEventListener("datosActualizados",()=>{let t=localStorage.getItem("Nuevo usuario");if(t)try{this.registroRecupParseado=JSON.parse(t),Array.isArray(this.registroRecupParseado)?console.log("Es un arreglo:",this.registroRecupParseado):console.log("No es un arreglo JSON v\xe1lido:",this.registroRecupParseado)}catch(i){console.error("Error al analizar el valor del LocalStorage:",i)}})}ngAfterViewInit(){const t=this.animationCtrl.create().addElement(this.cardElements.first.nativeElement).duration(1500).iterations(1).direction("alternate").fromTo("background","white","Green"),i=this.animationCtrl.create().addElement(this.cardElements.last.nativeElement).duration(1500).iterations(1).direction("alternate").fromTo("background","white","Green"),n=this.animationCtrl.create().addElement(this.cardElements.last.nativeElement).duration(1500).iterations(1).direction("alternate").fromTo("background","white","Red"),r=this.animationCtrl.create().addElement(this.cardElements.first.nativeElement).duration(1500).iterations(1).direction("alternate").fromTo("background","white","Red");this.animation=this.animationCtrl.create().duration(500).iterations(1).addAnimation([t]),this.animation2=this.animationCtrl.create().duration(500).iterations(2).addAnimation([i]),this.animationExito=this.animationCtrl.create().duration(500).iterations(2).addAnimation([n]),this.animationExito1=this.animationCtrl.create().duration(500).iterations(2).addAnimation([r])}camposValidos(){this.claveValida=this.clave.length<4,this.nombreValido=this.nombre.length<6}play(){this.registroRecupParseado&&this.clave==this.registroRecupParseado[5]?this.animation2.play():this.animationExito.play()}play2(){this.registroRecupParseado&&this.nombre==this.registroRecupParseado[4]?this.animation.play():this.animationExito1.play()}login(){var t=this;return(0,p.Z)(function*(){t.registroRecupParseado?t.nombre!=t.registroRecupParseado[4]||t.clave!=t.registroRecupParseado[5]?yield(yield t.alertController.create({header:"Error",message:"El usuario y contrase\xf1a ingresados no est\xe1n registrados",buttons:["OK"]})).present():(t.storage.setvalue("Sesion de usuario",{Usuario:t.registroRecupParseado[4],Contrase\u00f1a:t.registroRecupParseado[5]}),t.navCtrl.navigateForward("/lector-qr",{queryParams:{username:t.nombre}})):yield(yield t.alertController.create({header:"No hay datos registrados",message:"Registrate",buttons:[{text:"Si",handler:()=>{t.navCtrl.navigateForward("/register")}},{text:"No",role:"cancel",handler:()=>{t.navCtrl.navigateBack("/home")}}]})).present()})()}registrar(){this.navCtrl.navigateForward("/register")}recuperar(){this.navCtrl.navigateForward("/cambio-clave")}irSelfie(){this.navCtrl.navigateForward("/selfie")}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(c.SH),e.Y36(c.vB),e.Y36(c.Br),e.Y36(v.V))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-login"]],viewQuery:function(i,n){if(1&i&&e.Gf(o.PM,5,e.SBq),2&i){let r;e.iGM(r=e.CRH())&&(n.cardElements=r)}},decls:38,vars:8,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],["lines","full"],["id","nombre","minlength","6","maxlength","6",3,"ngModel","input","ngModelChange"],[1,"error_mensaje"],["id","clave","type","password","minlength","4","maxlength","4",3,"ngModel","input","ngModelChange"],[3,"click"],["color","danger",3,"click"],["color","warning",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Login"),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),e._uU(8,"Login"),e.qZA()()(),e.TgZ(9,"ion-item")(10,"ion-title"),e._uU(11," Inicio de sesion "),e.qZA()(),e._UZ(12,"br"),e.TgZ(13,"ion-item",4)(14,"ion-card")(15,"ion-card-content")(16,"ion-input",5),e.NdJ("input",function(){return n.play2()})("ngModelChange",function(d){return n.nombre=d}),e._uU(17,"Usuario:"),e.qZA(),e.TgZ(18,"ion-label",6),e._uU(19,"El usuario debe tener 6 digitos"),e.qZA()()()(),e.TgZ(20,"ion-item",4)(21,"ion-card")(22,"ion-card-content")(23,"ion-input",7),e.NdJ("input",function(){return n.play()})("ngModelChange",function(d){return n.clave=d}),e._uU(24,"Contrase\xf1a:"),e.qZA(),e.TgZ(25,"ion-label",6),e._uU(26,"La contrase\xf1a debe poseer 4 digitos"),e.qZA()()()(),e.TgZ(27,"ion-item")(28,"ion-button",8),e.NdJ("click",function(){return n.login()}),e._uU(29,"Ingresar"),e.qZA(),e.TgZ(30,"ion-button",9),e.NdJ("click",function(){return n.registrar()}),e._uU(31,"Registrar"),e.qZA()(),e.TgZ(32,"ion-item")(33,"ion-button",10),e.NdJ("click",function(){return n.recuperar()}),e._uU(34,"Recuperar Contrase\xf1a"),e.qZA()(),e.TgZ(35,"ion-item")(36,"ion-button",10),e.NdJ("click",function(){return n.irSelfie()}),e._uU(37,"Selfie"),e.qZA()()()),2&i&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(12),e.Q6J("ngModel",n.nombre),e.xp6(2),e.ekj("visible",n.nombreValido),e.xp6(5),e.Q6J("ngModel",n.clave),e.xp6(2),e.ekj("visible",n.claveValida))},dependencies:[l.JJ,l.wO,l.nD,l.On,o.YG,o.PM,o.FN,o.W2,o.Gu,o.pK,o.Ie,o.Q$,o.wd,o.sr,o.j9],styles:[".error_mensaje[_ngcontent-%COMP%]{color:red;display:none}.visible[_ngcontent-%COMP%]{display:block}#nombre[_ngcontent-%COMP%], #clave[_ngcontent-%COMP%]{color:#000}"]})}return a})();const f=[{path:"",component:m}];let P=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.oAB({type:a});static#i=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(f),g.Bz]})}return a})(),C=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.oAB({type:a,bootstrap:[m]});static#i=this.\u0275inj=e.cJS({imports:[h.ez,l.u5,o.Pc,P]})}return a})()}}]);