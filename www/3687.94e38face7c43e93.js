"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3687],{3687:(M,u,s)=>{s.r(u),s.d(u,{LoginPageModule:()=>P});var v=s(6814),c=s(95),r=s(9004),g=s(3044),m=s(5861),e=s(6689),d=s(6406),C=s(189);let p=(()=>{class a{constructor(t,n,o,i){this.navCtrl=t,this.animationCtrl=n,this.alertController=o,this.storage=i,this.loggedInUser=null,this.registerUser=null,this.nombre="",this.nombreValido=!1,this.clave="",this.claveValida=!1}ngOnInit(){var t=this;return(0,m.Z)(function*(){yield t.storage.getvalue("Nuevo usuario"),yield t.storage.getvalue("Sesion de usuario");const n=yield t.storage.getvalue("Sesion de usuario"),o=yield t.storage.getvalue("Nuevo usuario");n&&n.Usuario==o.Nombre_Usuario&&n.Contrase\u00f1a==o.Clave&&(t.loggedInUser=n,yield(yield t.alertController.create({header:"Cuenta activa",message:"Se ha encontrado una cuenta iniciada, deseas continuar con esta cuenta?",buttons:[{text:"Si",handler:()=>{t.navCtrl.navigateForward("/lector-qr")}},{text:"No",role:"cancel",handler:()=>{t.navCtrl.navigateBack("/register")}}]})).present());let l=localStorage.getItem("Nuevo usuario");if(l)try{t.registroRecupParseado=JSON.parse(l),Array.isArray(t.registroRecupParseado)}catch(h){console.error("Error al analizar el valor del LocalStorage:",h)}})()}ionViewDidEnter(){window.addEventListener("datosActualizados",()=>{let t=localStorage.getItem("Nuevo usuario");if(t)try{this.registroRecupParseado=JSON.parse(t),Array.isArray(this.registroRecupParseado)}catch(n){console.error("Error al analizar el valor del LocalStorage:",n)}})}ngAfterViewInit(){const t=this.animationCtrl.create().addElement(this.cardElements.first.nativeElement).duration(1500).iterations(1).direction("alternate").fromTo("background","white","Green"),n=this.animationCtrl.create().addElement(this.cardElements.last.nativeElement).duration(1500).iterations(1).direction("alternate").fromTo("background","white","Green"),o=this.animationCtrl.create().addElement(this.cardElements.last.nativeElement).duration(1500).iterations(1).direction("alternate").fromTo("background","white","Red"),i=this.animationCtrl.create().addElement(this.cardElements.first.nativeElement).duration(1500).iterations(1).direction("alternate").fromTo("background","white","Red");this.animation=this.animationCtrl.create().duration(500).iterations(1).addAnimation([t]),this.animation2=this.animationCtrl.create().duration(500).iterations(2).addAnimation([n]),this.animationExito=this.animationCtrl.create().duration(500).iterations(2).addAnimation([o]),this.animationExito1=this.animationCtrl.create().duration(500).iterations(2).addAnimation([i])}camposValidos(){this.claveValida=this.clave.length<4,this.nombreValido=this.nombre.length<6}play(){this.registroRecupParseado&&this.clave==this.registroRecupParseado[5]?this.animation2.play():this.animationExito.play()}play2(){this.registroRecupParseado&&this.nombre==this.registroRecupParseado[4]?this.animation.play():this.animationExito1.play()}login(){var t=this;return(0,m.Z)(function*(){t.registroRecupParseado?t.nombre!=t.registroRecupParseado[4]||t.clave!=t.registroRecupParseado[5]?yield(yield t.alertController.create({header:"Error",message:"El usuario y contrase\xf1a ingresados no est\xe1n registrados",buttons:["OK"]})).present():(t.storage.setvalue("Sesion de usuario",{Usuario:t.registroRecupParseado[4],Contrase\u00f1a:t.registroRecupParseado[5]}),t.navCtrl.navigateForward("/lector-qr",{queryParams:{username:t.nombre}})):yield(yield t.alertController.create({header:"No hay datos registrados",message:"Registrate",buttons:[{text:"Si",handler:()=>{t.navCtrl.navigateForward("/register")}},{text:"No",role:"cancel",handler:()=>{t.navCtrl.navigateBack("/home")}}]})).present()})()}registrar(){this.navCtrl.navigateForward("/register")}recuperar(){this.navCtrl.navigateForward("/cambio-clave")}volver(){this.navCtrl.navigateBack("/home")}static#e=this.\u0275fac=function(n){return new(n||a)(e.Y36(d.SH),e.Y36(d.vB),e.Y36(d.Br),e.Y36(C.V))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-login"]],viewQuery:function(n,o){if(1&n&&e.Gf(r.PM,5,e.SBq),2&n){let i;e.iGM(i=e.CRH())&&(o.cardElements=i)}},decls:42,vars:8,consts:[[3,"translucent"],[1,"ion-padding","custom-background",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"volver"],[3,"click"],[1,"top"],[1,"inicio"],[1,"datos"],[1,"user"],[1,"card1"],["id","nombre","minlength","6","maxlength","6",3,"ngModel","input","ngModelChange"],[1,"error_mensaje"],[1,"clave"],[1,"card2"],["id","clave","type","password","minlength","4","maxlength","4",3,"ngModel","input","ngModelChange"],[1,"opciones"],["type","button","color","danger",1,"opcional",3,"click"],[1,"recuperar_clave"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Login"),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),e._uU(8,"Login"),e.qZA()()(),e.TgZ(9,"div",4)(10,"ion-button",5),e.NdJ("click",function(){return o.volver()}),e._uU(11,"Volver"),e.qZA()(),e.TgZ(12,"div",6)(13,"div",7)(14,"ion-title"),e._uU(15," Inicio de sesion "),e.qZA()()(),e._UZ(16,"br"),e.TgZ(17,"div",8)(18,"div",9)(19,"ion-card",10)(20,"ion-card-content")(21,"ion-input",11),e.NdJ("input",function(){return o.play2()})("ngModelChange",function(l){return o.nombre=l}),e._uU(22,"Usuario:"),e.qZA(),e.TgZ(23,"ion-label",12),e._uU(24,"El usuario debe tener 6 digitos"),e.qZA()()()(),e.TgZ(25,"div",13)(26,"ion-card",14)(27,"ion-card-content")(28,"ion-input",15),e.NdJ("input",function(){return o.play()})("ngModelChange",function(l){return o.clave=l}),e._uU(29,"Contrase\xf1a:"),e.qZA(),e.TgZ(30,"ion-label",12),e._uU(31,"La contrase\xf1a debe poseer 4 digitos"),e.qZA()()()()(),e.TgZ(32,"div",16)(33,"ion-button",5),e.NdJ("click",function(){return o.login()}),e._uU(34,"Ingresar"),e.qZA(),e.TgZ(35,"p"),e._uU(36,"\xbfNo tienes cuenta a\xfan? registrate"),e.TgZ(37,"a",17),e.NdJ("click",function(){return o.registrar()}),e._uU(38," Aqu\xed"),e.qZA()()(),e.TgZ(39,"div",18)(40,"p"),e._uU(41,"Opci\xf3n de cambio de contrase\xf1a temporalmente deshabilitada"),e.qZA()()()),2&n&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(17),e.Q6J("ngModel",o.nombre),e.xp6(2),e.ekj("visible",o.nombreValido),e.xp6(5),e.Q6J("ngModel",o.clave),e.xp6(2),e.ekj("visible",o.claveValida))},dependencies:[c.JJ,c.wO,c.nD,c.On,r.YG,r.PM,r.FN,r.W2,r.Gu,r.pK,r.Q$,r.wd,r.sr,r.j9],styles:[".error_mensaje[_ngcontent-%COMP%]{color:red;display:none}.visible[_ngcontent-%COMP%]{display:block}#nombre[_ngcontent-%COMP%], #clave[_ngcontent-%COMP%]{color:#000}.custom-background[_ngcontent-%COMP%]{--ion-background-color: #80DAEB}.top[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:10px;border-style:solid;border-color:#f0f8ff;background-color:#80daeb}.top[_ngcontent-%COMP%]   .volver[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;margin-top:5px}.top[_ngcontent-%COMP%]   .volver[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:auto}.top[_ngcontent-%COMP%]   .inicio[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:10px;color:#000}.datos[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-content:center;align-items:center}.datos[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{width:50vh;background-color:#80daeb}.datos[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .card1[_ngcontent-%COMP%]{background-color:#fff}.datos[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   #nombre[_ngcontent-%COMP%]{color:#000}.datos[_ngcontent-%COMP%]   .clave[_ngcontent-%COMP%]{width:50vh}.datos[_ngcontent-%COMP%]   .clave[_ngcontent-%COMP%]   .card2[_ngcontent-%COMP%]{background-color:#fff}.datos[_ngcontent-%COMP%]   .clave[_ngcontent-%COMP%]   #clave[_ngcontent-%COMP%]{color:#000}.opciones[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-content:center;align-items:center}.opciones[_ngcontent-%COMP%]   .opcional[_ngcontent-%COMP%]:hover{transition:.3s ease;color:red}.opciones[_ngcontent-%COMP%]   .opcional[_ngcontent-%COMP%]{transition:.3s ease}.recuperar_clave[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-content:center;align-items:center}.recuperar_clave[_ngcontent-%COMP%]   .opcional2[_ngcontent-%COMP%]:hover{transition:.3s ease;color:red}.recuperar_clave[_ngcontent-%COMP%]   .opcional2[_ngcontent-%COMP%]{transition:.3s ease}"]})}return a})();const f=[{path:"",component:p}];let _=(()=>{class a{static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275mod=e.oAB({type:a});static#n=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(f),g.Bz]})}return a})(),P=(()=>{class a{static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275mod=e.oAB({type:a,bootstrap:[p]});static#n=this.\u0275inj=e.cJS({imports:[v.ez,c.u5,r.Pc,_]})}return a})()}}]);