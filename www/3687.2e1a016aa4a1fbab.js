"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3687],{189:(C,v,r)=>{r.d(v,{V:()=>_});var p=r(5861),d=r(6689),i=r(2014);let _=(()=>{class g{constructor(l){this.storage=l,this.storage.create()}setvalue(l,c){var m=this;return(0,p.Z)(function*(){const u=yield m.storage.set(l,c);console.log(u)})()}getvalue(l){var c=this;return(0,p.Z)(function*(){return yield c.storage.get(l)})()}pushValue(l,c){var m=this;return(0,p.Z)(function*(){let u=yield m.getvalue(l);u?Array.isArray(u)?u.push(c):u=[u,c]:u=[c],yield m.storage.set(l,u)})()}static#e=this.\u0275fac=function(c){return new(c||g)(d.LFG(i.K))};static#t=this.\u0275prov=d.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},3687:(C,v,r)=>{r.r(v),r.d(v,{LoginPageModule:()=>y});var p=r(6814),d=r(95),i=r(3582),_=r(3044),g=r(5861),e=r(6689),l=r(6406),c=r(189);let m=(()=>{class s{constructor(t,o,n,a){this.navCtrl=t,this.animationCtrl=o,this.alertController=n,this.storage=a,this.loggedInUser=null,this.registerUser=null,this.nombre="",this.nombreValido=!1,this.clave="",this.claveValida=!1}ngOnInit(){var t=this;return(0,g.Z)(function*(){yield t.storage.getvalue("Nuevo usuario"),yield t.storage.getvalue("Sesion de usuario");const o=yield t.storage.getvalue("Sesion de usuario"),n=yield t.storage.getvalue("Nuevo usuario"),a={username:n.Nombre_Usuario,clave:n.Clave};console.log(n),console.log(n.Nombre_Usuario),console.log(a),o&&o.Usuario==n.Nombre_Usuario&&o.Contrase\u00f1a==n.Clave&&(t.loggedInUser=o,yield(yield t.alertController.create({header:"Cuenta activa",message:"Se ha encontrado una cuenta iniciada, deseas continuar con esta cuenta?",buttons:[{text:"Si",handler:()=>{t.navCtrl.navigateForward("/lector-qr")}},{text:"No",role:"cancel",handler:()=>{t.navCtrl.navigateBack("/register")}}]})).present());let h=localStorage.getItem("Nuevo usuario");if(h)try{t.registroRecupParseado=JSON.parse(h),Array.isArray(t.registroRecupParseado)?console.log("Es un arreglo:",t.registroRecupParseado):console.log("No es un arreglo JSON v\xe1lido:",t.registroRecupParseado)}catch(f){console.error("Error al analizar el valor del LocalStorage:",f)}})()}ionViewDidEnter(){window.addEventListener("datosActualizados",()=>{let t=localStorage.getItem("Nuevo usuario");if(t)try{this.registroRecupParseado=JSON.parse(t),Array.isArray(this.registroRecupParseado)?console.log("Es un arreglo:",this.registroRecupParseado):console.log("No es un arreglo JSON v\xe1lido:",this.registroRecupParseado)}catch(o){console.error("Error al analizar el valor del LocalStorage:",o)}})}ngAfterViewInit(){const t=this.animationCtrl.create().addElement(this.cardElements.first.nativeElement).duration(1500).iterations(1).direction("alternate").fromTo("background","white","Green"),o=this.animationCtrl.create().addElement(this.cardElements.last.nativeElement).duration(1500).iterations(1).direction("alternate").fromTo("background","white","Green"),n=this.animationCtrl.create().addElement(this.cardElements.last.nativeElement).duration(1500).iterations(1).direction("alternate").fromTo("background","white","Red"),a=this.animationCtrl.create().addElement(this.cardElements.first.nativeElement).duration(1500).iterations(1).direction("alternate").fromTo("background","white","Red");this.animation=this.animationCtrl.create().duration(500).iterations(1).addAnimation([t]),this.animation2=this.animationCtrl.create().duration(500).iterations(2).addAnimation([o]),this.animationExito=this.animationCtrl.create().duration(500).iterations(2).addAnimation([n]),this.animationExito1=this.animationCtrl.create().duration(500).iterations(2).addAnimation([a])}camposValidos(){this.claveValida=this.clave.length<4,this.nombreValido=this.nombre.length<6}play(){this.registroRecupParseado&&this.clave==this.registroRecupParseado[5]?this.animation2.play():this.animationExito.play()}play2(){this.registroRecupParseado&&this.nombre==this.registroRecupParseado[4]?this.animation.play():this.animationExito1.play()}login(){var t=this;return(0,g.Z)(function*(){t.registroRecupParseado?t.nombre!=t.registroRecupParseado[4]||t.clave!=t.registroRecupParseado[5]?yield(yield t.alertController.create({header:"Error",message:"El usuario y contrase\xf1a ingresados no est\xe1n registrados",buttons:["OK"]})).present():(t.storage.setvalue("Sesion de usuario",{Usuario:t.registroRecupParseado[4],Contrase\u00f1a:t.registroRecupParseado[5]}),t.navCtrl.navigateForward("/lector-qr",{queryParams:{username:t.nombre}})):yield(yield t.alertController.create({header:"No hay datos registrados",message:"Registrate",buttons:[{text:"Si",handler:()=>{t.navCtrl.navigateForward("/register")}},{text:"No",role:"cancel",handler:()=>{t.navCtrl.navigateBack("/home")}}]})).present()})()}registrar(){this.navCtrl.navigateForward("/register")}recuperar(){this.navCtrl.navigateForward("/cambio-clave")}volver(){this.navCtrl.navigateBack("/home")}static#e=this.\u0275fac=function(o){return new(o||s)(e.Y36(l.SH),e.Y36(l.vB),e.Y36(l.Br),e.Y36(c.V))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-login"]],viewQuery:function(o,n){if(1&o&&e.Gf(i.PM,5,e.SBq),2&o){let a;e.iGM(a=e.CRH())&&(n.cardElements=a)}},decls:39,vars:8,consts:[[3,"translucent"],[1,"ion-padding","custom-background",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"top"],[1,"volver"],[3,"click"],[1,"inicio"],["lines","full"],["id","nombre","minlength","6","maxlength","6",3,"ngModel","input","ngModelChange"],[1,"error_mensaje"],["id","clave","type","password","minlength","4","maxlength","4",3,"ngModel","input","ngModelChange"],["color","danger",3,"click"],["color","warning",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Login"),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),e._uU(8,"Login"),e.qZA()()(),e.TgZ(9,"div",4)(10,"div",5)(11,"ion-button",6),e.NdJ("click",function(){return n.volver()}),e._uU(12,"Volver"),e.qZA()(),e.TgZ(13,"div",7)(14,"ion-title"),e._uU(15," Inicio de sesion "),e.qZA()()(),e._UZ(16,"br"),e.TgZ(17,"ion-item",8)(18,"ion-card")(19,"ion-card-content")(20,"ion-input",9),e.NdJ("input",function(){return n.play2()})("ngModelChange",function(h){return n.nombre=h}),e._uU(21,"Usuario:"),e.qZA(),e.TgZ(22,"ion-label",10),e._uU(23,"El usuario debe tener 6 digitos"),e.qZA()()()(),e.TgZ(24,"ion-item",8)(25,"ion-card")(26,"ion-card-content")(27,"ion-input",11),e.NdJ("input",function(){return n.play()})("ngModelChange",function(h){return n.clave=h}),e._uU(28,"Contrase\xf1a:"),e.qZA(),e.TgZ(29,"ion-label",10),e._uU(30,"La contrase\xf1a debe poseer 4 digitos"),e.qZA()()()(),e.TgZ(31,"ion-item")(32,"ion-button",6),e.NdJ("click",function(){return n.login()}),e._uU(33,"Ingresar"),e.qZA(),e.TgZ(34,"ion-button",12),e.NdJ("click",function(){return n.registrar()}),e._uU(35,"Registrar"),e.qZA()(),e.TgZ(36,"ion-item")(37,"ion-button",13),e.NdJ("click",function(){return n.recuperar()}),e._uU(38,"Recuperar Contrase\xf1a"),e.qZA()()()),2&o&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(16),e.Q6J("ngModel",n.nombre),e.xp6(2),e.ekj("visible",n.nombreValido),e.xp6(5),e.Q6J("ngModel",n.clave),e.xp6(2),e.ekj("visible",n.claveValida))},dependencies:[d.JJ,d.wO,d.nD,d.On,i.YG,i.PM,i.FN,i.W2,i.Gu,i.pK,i.Ie,i.Q$,i.wd,i.sr,i.j9],styles:[".error_mensaje[_ngcontent-%COMP%]{color:red;display:none}.visible[_ngcontent-%COMP%]{display:block}#nombre[_ngcontent-%COMP%], #clave[_ngcontent-%COMP%]{color:#000}.custom-background[_ngcontent-%COMP%]{--ion-background-color: #80DAEB}.top[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:10px;border-style:solid;border-color:#f0f8ff;background-color:#80daeb}.top[_ngcontent-%COMP%]   .volver[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;margin-top:5px}.top[_ngcontent-%COMP%]   .volver[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:auto}.top[_ngcontent-%COMP%]   .inicio[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:10px;color:#000}"]})}return s})();const u=[{path:"",component:m}];let P=(()=>{class s{static#e=this.\u0275fac=function(o){return new(o||s)};static#t=this.\u0275mod=e.oAB({type:s});static#o=this.\u0275inj=e.cJS({imports:[_.Bz.forChild(u),_.Bz]})}return s})(),y=(()=>{class s{static#e=this.\u0275fac=function(o){return new(o||s)};static#t=this.\u0275mod=e.oAB({type:s,bootstrap:[m]});static#o=this.\u0275inj=e.cJS({imports:[p.ez,d.u5,i.Pc,P]})}return s})()}}]);